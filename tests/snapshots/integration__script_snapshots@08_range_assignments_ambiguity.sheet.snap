---
source: tests/integration.rs
expression: output
input_file: tests/scripts/08_range_assignments_ambiguity.sheet
---
--- SCRIPT ---
> // Excel-style range assignments (view-based) + ambiguity examples
> alloc slice [6, 6]
Allocated tensor 'slice'
> // Range set values (broadcast scalar)
> A1:C1 = 5
Formula set for 3 cells
> // Range assign array (expands across the range)
> A2:B3 = [1, 2, 3, 4]
Formula set for 4 cells
> // Ambiguity: array value vs expansion
> // Store an array in a single cell
> #[5,0] = [9, 8]
Formula set for 1 cell (#[5,0])
> // Using the array cell in a range assignment broadcasts the array VALUE to each cell
> A4:B4 = #[5,0]
Formula set for 2 cells
> // Relative refs in ranges
> D1:D3 = 2
Formula set for 3 cells
> E1:E3 = @[-1, 0] * 10
Formula set for 3 cells
> tick
Tick processed.

[Tick 1]
#[0,0]: 5 (formula: 5)
#[1,0]: 5 (formula: 5)
#[2,0]: 5 (formula: 5)
#[3,0]: 2 (formula: 2)
#[4,0]: empty (formula: (@[-1,0] * 10))
#[5,0]: [9, 8] (formula: [9, 8])
#[0,1]: 1 (formula: 1)
#[1,1]: 2 (formula: 2)
#[3,1]: 2 (formula: 2)
#[4,1]: empty (formula: (@[-1,0] * 10))
#[0,2]: 3 (formula: 3)
#[1,2]: 4 (formula: 4)
#[3,2]: 2 (formula: 2)
#[4,2]: empty (formula: (@[-1,0] * 10))
#[0,3]: 0 (formula: #[5,0])
#[1,3]: 0 (formula: #[5,0])
> tick
Tick processed.

[Tick 2]
#[0,0]: 5 (formula: 5)
#[1,0]: 5 (formula: 5)
#[2,0]: 5 (formula: 5)
#[3,0]: 2 (formula: 2)
#[4,0]: 20 (formula: (@[-1,0] * 10))
#[5,0]: [9, 8] (formula: [9, 8])
#[0,1]: 1 (formula: 1)
#[1,1]: 2 (formula: 2)
#[3,1]: 2 (formula: 2)
#[4,1]: 20 (formula: (@[-1,0] * 10))
#[0,2]: 3 (formula: 3)
#[1,2]: 4 (formula: 4)
#[3,2]: 2 (formula: 2)
#[4,2]: 20 (formula: (@[-1,0] * 10))
#[0,3]: [9, 8] (formula: #[5,0])
#[1,3]: [9, 8] (formula: #[5,0])
