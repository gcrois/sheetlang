// basic game of life
alloc formula [3, 1]

// Game of life logic
#[0,0] = (n, c) => if (c == 1 && n in {2, 3}) then 1 else if (c == 0 && n == 3) then 1 else 0
// Gather neighbor count from relative refs at the final call site
#[1,0] = () => sum(flat(@[-1:1,-1:1])) - @[0,0]
// Combine and apply logic
#[2,0] = () => formula#[0,0](formula#[1,0](), @[0,0])

alloc board [3, 3]
// immediately set state of the board to init
#[*] := 0
// create blinker pattern
#[:, 1] := 1
// Set formula for the board to apply game of life rules
#[*] = formula#[2,0]()
tick

// should flip
tick

// should flip back
tick
